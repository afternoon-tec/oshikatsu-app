<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ğŸ’– æ¨ã—æ´»å®¶è¨ˆç°¿ ğŸ’–</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; margin: 30px; background: #fffafc; }
    h1 { text-align: center; color: #e91e63; }
    table { border-collapse: collapse; width: 100%; margin-bottom: 40px; }
    th, td { border: 1px solid #ccc; padding: 8px 12px; text-align: center; }
    th { background: #ffe6f0; }
    .box { border: 2px solid #e91e63; background: #fff0f6; padding: 15px; margin: 20px 0; border-radius: 8px; }
    .oshi-title { background: #fce4ec; padding: 10px; font-weight: bold; border-left: 5px solid #e91e63; margin-top: 30px; }
    .btn { background: #e91e63; color: white; padding: 5px 10px; text-decoration: none; border-radius: 4px; margin-right: 10px; }
    .btn:hover { background: #d81b60; }
  </style>
</head>
<body>

<h1>ğŸ’– æ¨ã—æ´»å®¶è¨ˆç°¿ ğŸ’–</h1>
<p>
  <a href="/add" class="btn">ï¼‹ æ–°ã—ã„è¨˜éŒ²ã‚’è¿½åŠ </a>
  <a href="/manage" class="btn">ğŸ›  ç·¨é›†ãƒ»å‰Šé™¤ãƒšãƒ¼ã‚¸ã¸</a>
</p>

<!-- å…¨ä½“åˆè¨ˆ -->
<div class="box">
  <h2>å…¨ä½“ã®åˆè¨ˆ</h2>
  <p>å‡ºé‡‘ï¼š{{ total.total_expense or 0 }} å††ã€€
     å…¥é‡‘ï¼š{{ total.total_income or 0 }} å††ã€€
     æ®‹é«˜ï¼š{{ total.balance or 0 }} å††</p>
</div>

<!-- æœˆã”ã¨ã®åˆè¨ˆ -->
<div class="box">
  <h2>æœˆã”ã¨ã®åˆè¨ˆ</h2>
  <table>
    <tr><th>æœˆ</th><th>å‡ºé‡‘</th><th>å…¥é‡‘</th><th>å·®é¡</th></tr>
    {% for m in monthly %}
    <tr>
      <td>{{ m.month }}</td>
      <td>{{ m.total_expense or 0 }}</td>
      <td>{{ m.total_income or 0 }}</td>
      <td>{{ m.balance or 0 }}</td>
    </tr>
    {% endfor %}
  </table>
</div>

<!-- æ¨ã—ã”ã¨ã®ä¸€è¦§ -->
{% for oshi, rows in data_by_oshi.items() %}
  <div class="oshi-title">{{ oshi }} ã®è¨˜éŒ²</div>
  <table>
    <tr><th>æ—¥ä»˜</th><th>ã‚«ãƒ†ã‚´ãƒª</th><th>å‡ºé‡‘</th><th>å…¥é‡‘</th><th>ãƒ¡ãƒ¢</th></tr>
    {% for r in rows %}
    <tr>
      <td>{{ r.date }}</td>
      <td>{{ r.category }}</td>
      <td>{{ r.expense }}</td>
      <td>{{ r.income }}</td>
      <td>{{ r.memo }}</td>
    </tr>
    {% endfor %}
  </table>
{% endfor %}
<p style="text-align: center; margin-top: 40px;">
  <a href="/home" class="btn">ğŸ  ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>
</p>


</body>
</html>

